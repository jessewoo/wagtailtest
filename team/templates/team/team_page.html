{% extends "base.html" %}
{% load wagtailcore_tags wagtailimages_tags %}

{% block content %}
<div class="team-page">
    <div class="container">
        <header class="team-header">
            <h1>{{ page.title }}</h1>
            
            {% if page.intro %}
                <div class="intro">
                    {{ page.intro|richtext }}
                </div>
            {% endif %}
        </header>
        
        {% if page.show_departments %}
            {% for dept_data in page.get_departments_with_members %}
                <section class="department-section">
                    <h2 class="department-title">{{ dept_data.department.name }}</h2>
                    {% if dept_data.department.description %}
                        <p class="department-description">{{ dept_data.department.description }}</p>
                    {% endif %}
                    
                    <div class="team-grid">
                        {% for member in dept_data.members %}
                            {% include "team/team_member_card.html" with member=member %}
                        {% endfor %}
                    </div>
                </section>
            {% endfor %}
        {% else %}
            <div class="team-grid">
                {% for member in page.get_team_members %}
                    {% include "team/team_member_card.html" with member=member %}
                {% endfor %}
            </div>
        {% endif %}
    </div>
</div>

<style>
.team-page {
    padding: 2rem 0;
}

.container {
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 1rem;
}

.team-header {
    text-align: center;
    margin-bottom: 3rem;
}

.team-header h1 {
    font-size: 2.5rem;
    margin-bottom: 1rem;
    color: #333;
}

.intro {
    font-size: 1.1rem;
    color: #666;
    max-width: 600px;
    margin: 0 auto;
}

.department-section {
    margin-bottom: 4rem;
}

.department-title {
    font-size: 2rem;
    margin-bottom: 0.5rem;
    color: #333;
    border-bottom: 2px solid #007acc;
    padding-bottom: 0.5rem;
}

.department-description {
    color: #666;
    margin-bottom: 2rem;
    font-size: 1.1rem;
}

.team-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 2rem;
    margin-top: 2rem;
}
</style>
{% endblock %}